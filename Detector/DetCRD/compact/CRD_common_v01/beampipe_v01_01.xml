<lccdd>
  <info name="CRD" title="CRD Beam pipe" author="Chengdong Fu" url="no" status="development" version="1.0">
    <comment>A beampipe for CRD</comment>
  </info>

  <display>
    <vis name="TubeVis"   alpha="0.1" r="1.0" g="0.7"  b="0.5"   showDaughters="true"  visible="true"/>
    <vis name="VacVis"   alpha="1.0" r="0.0" g="0.0"  b="0.0"   showDaughters="true"  visible="false"/>
  </display>

  <define>
    <constant name="ForkAsymThickness" value="BeamPipeDnstream_inner_radius+BeamPipeCu_thickness-BeamPipeUpstream_inner_radius"/>
  </define>

  <detectors>        
    <detector name="BeamPipe" type="DD4hep_CepCBeamPipe_v01" vis="BeamPipeVis">
      <parameter crossingangle="CrossingAngle" />
      <envelope vis="BlueVis">
	<shape type="Assembly"/>
      </envelope>

      <section type ="Center" name="IPInnerTube" zStart="0" zEnd="BeamPipeCentralBe_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeCentral_inner_radius"/>
	<layer material="G4_Be" thickness="BeamPipeBe_inner_thickness"/>
	<layer material="G4_PARAFFIN" thickness="BeamPipeCooling_thickness"/>
	<layer material="G4_Be" thickness="BeamPipeBe_outer_thickness"/>
      </section>
      <section type="Center" name="IPAl" zStart="BeamPipeCentralBe_zmax" zEnd="BeamPipeCentralAl_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeCentral_inner_radius"/>
	<layer material="G4_Al" thickness="BeamPipeAl_thickness"/>
      </section>
      <section type="Center" name="ExpandPipe" zStart="BeamPipeCentralAl_zmax" zEnd="BeamPipeConeAl_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeCentral_inner_radius" thicknessEnd="BeamPipeExpanded_inner_radius"/>
	<layer material="G4_Al" thickness="BeamPipeAl_thickness" thicknessEnd="BeamPipeAl_thickness"/>
      </section>
      <section type="Center" name="ThickPipe" zStart="BeamPipeConeAl_zmax" zEnd="BeamPipeLinkerAl_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeExpanded_inner_radius"/>
	<layer material="G4_Al" thickness="BeamPipeAl_thickness"/>
      </section>
      <section type="CenterSide" name="OutsideLink" zStart="BeamPipeLinkerAl_zmax" zEnd="BeamPipeLinkerCu_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeExpanded_inner_radius"/>
	<layer material="G4_Cu" thickness="BeamPipeCu_thickness"/>
      </section>
      <section type="FatWaist" name="Waist" zStart="BeamPipeLinkerCu_zmax" zEnd="BeamPipeWaist_zmax" rStart="BeamPipeExpanded_inner_radius" size="BeamPipeCrotch_hole_height">
	<layer material="G4_Cu" thickness="BeamPipeCu_thickness"/>
      </section>
      <!--CrotchAsymUp&CrotchAsymDn not work to fix, because of problem on convert from TGeo to Geant4--> 
      <!--section type="CrotchAsymUp" name="Fork" zStart="BeamPipeWaist_zmax" zEnd="BeamPipeCrotch_zmax"
	       rStart="BeamPipeExpanded_inner_radius" rEnd="BeamPipeUpstream_inner_radius" size="BeamPipeCrotch_hole_height">
	<layer material="G4_Cu" thickness="BeamPipeCu_thickness" thicknessEnd="ForkAsymThickness"/>
      </section>
      <section type="CrotchAsymDn" name="Fork" zStart="BeamPipeWaist_zmax" zEnd="BeamPipeCrotch_zmax"
	       rStart="BeamPipeExpanded_inner_radius" rEnd="BeamPipeDnstream_inner_radius" size="BeamPipeCrotch_hole_height">
        <layer material="G4_Cu" thickness="BeamPipeCu_thickness"/>
      </section-->
      <section type="FlareLegUp" name="FirstDoublePipe" zStart="BeamPipeCrotch_zmax" zEnd="BeamPipeFirstSeparated_zmax" rStart="0">
	<layer material="beam" thickness="BeamPipeUpstream_inner_radius" thicknessEnd="BeamPipeDnstream_inner_radius"/>
	<layer material="G4_Cu" thickness="ForkAsymThickness" thicknessEnd="BeamPipeCu_thickness"/>
      </section>
      <section type="FlareLegDn" name="FirstDoublePipe" zStart="BeamPipeCrotch_zmax" zEnd="BeamPipeFirstSeparated_zmax" rStart="0">
        <layer material="beam" thickness="BeamPipeDnstream_inner_radius"/>
        <layer material="G4_Cu" thickness="BeamPipeCu_thickness"/>
      </section>
    </detector>
  </detectors>        
</lccdd>
